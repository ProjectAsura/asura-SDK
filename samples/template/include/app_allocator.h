//-------------------------------------------------------------------------------------------------
// File : app_allocator.h
// Desc : Defualt Allocator.
// Copyright(c) Project Asura. All right reserved.
//-------------------------------------------------------------------------------------------------
#pragma once

//-------------------------------------------------------------------------------------------------
// Includes
//-------------------------------------------------------------------------------------------------
#include <a3d.h>
#include <new>


///////////////////////////////////////////////////////////////////////////////////////////////////
// Allocator class
///////////////////////////////////////////////////////////////////////////////////////////////////
class Allocator : public a3d::IAllocator
{
    //=============================================================================================
    // list of friend classes and methods.
    //=============================================================================================
    /* NOTHING */

public:
    //=============================================================================================
    // public variables.
    //=============================================================================================
    /* NOTHING */

    //=============================================================================================
    // public methods.
    //=============================================================================================
    static Allocator* Instance()
    { return &s_Instance; }

    void* Alloc(size_t size, size_t alignment) noexcept override
    { return _aligned_malloc(size, alignment); }

    void Free(void* ptr) noexcept override
    { return _aligned_free(ptr); }

    void* Realloc(void* ptr, size_t size, size_t alignment) noexcept override
    { return _aligned_realloc(ptr, size, alignment); }

private:
    //=============================================================================================
    // private variables.
    //=============================================================================================
    static Allocator s_Instance;

    //=============================================================================================
    // private methods.
    //=============================================================================================
    /* NOTHING */
};